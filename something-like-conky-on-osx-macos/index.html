<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Something Like Conky on OSX/MacOS &#8211; Donald Hutchison</title>

<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Something Like Conky on OSX/MacOS">

<meta name="twitter:site" content="@rev_kachowski">
<meta name="twitter:creator" content="@rev_kachowski">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Something Like Conky on OSX/MacOS">

<meta property="og:url" content="/something-like-conky-on-osx-macos/">
<meta property="og:site_name" content="Donald Hutchison">





<link rel="canonical" href="/something-like-conky-on-osx-macos/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Donald Hutchison Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="/assets/js/vendor/html5shiv.min.js"></script>
  <script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>



<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="/" >Home</a></li>
		  
		    
		        
		    
		    <li><a href="/about/" >About</a></li>
		  
		    
		        
		    
		    <li><a href="/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="/projects/" >Projects</a></li>
		  
		    
		        
		        
		    <li><a href="https://github.com/rkachowski" target="_blank">Github</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="/" class="site-logo" rel="home" title="Donald Hutchison"><img src="/images/site-logo.png" width="200" height="200" alt="Donald Hutchison logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="/">Donald Hutchison</a></h1>
		<h2 class="site-description animated fadeIn" id="subtitle" itemprop="description">Personal Blog of Donald Hutchison featuring nonsense and software</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          
        </ul>
        
          <h1 class="entry-title">Something Like Conky on OSX/MacOS</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="/images/portrait.jpg" class="bio-photo" alt="Donald Hutchison bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Donald Hutchison</span></span>
        <span class="entry-date date published"><time datetime="2017-01-16T13:20:14+01:00"><i class="fa fa-calendar-o"></i> January 16, 2017</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>I’ve been using OSX as my main OS environment for a few years now, but I still miss the cool stat reporting that you would get from Conky on Linux systems. After looking around for a while, there doesn’t seem to be any kind of drop in replacement that would fit all my extensible desires. The closest thing I’ve found is GeekTool, but it needs some setup to get things working. Let’s try and do it.</p>

<h3 id="installation">Installation</h3>

<p>This is pretty easy as it seems to be available via Homebrew, we can get this via <code>brew install Caskroom/cask/geektool</code>. It’s then setup in your Applications folder to be run as you want.</p>

<h3 id="process-stats">Process Stats</h3>

<p>The first thing I want is something that will show my why my goddamn computer has slowed down all of a sudden. Has a full backup just kicked in, or should I get round to closing one of those 300 chrome tabs with Flash applications running in them?</p>

<p>The command I usually use for getting this information is <code>top</code> (or it’s flashier brother <code>htop</code>). <code>top</code> by default will run in an interactive mode and show you a ton of information. However, we just want to grab the current state at any one point in time and let GeekTool deal with periodically updating the information. After scouring the man page for <code>top</code>, it looks like we can do that with the following command.</p>

<p><code>
top -n 10 -l 2 -stats command,cpu,mem,user
</code></p>

<p>Here we’re saying 
* <code>-n 10</code> which means “give us the top 10 processes” 
* <code>-l 2</code> which means “give us two updates” (this is required as the program needs more than one sample to get data from) 
* <code>-c e</code> Use absolute measurements
* <code>-o cpu</code> Order by cpu
* <code>-stats command,cpu,mem,user</code> show us only these stats.</p>

<p>This gives us the following output</p>

<p>```
Processes: 259 total, 2 running, 15 stuck, 242 sleeping, 1447 threads
2017/01/16 13:37:45
Load Avg: 1.02, 0.90, 0.97
CPU usage: 5.23% user, 4.11% sys, 90.64% idle
SharedLibs: 188M resident, 23M data, 24M linkedit.
MemRegions: 46310 total, 3644M resident, 131M private, 913M shared.
PhysMem: 6419M used (1213M wired), 1764M unused.
VM: 717G vsize, 535M framework vsize, 0(0) swapins, 0(0) swapouts.
Networks: packets: 170355/101M in, 147108/34M out.
Disks: 297331/5523M read, 54410/1481M written.</p>

<p>COMMAND          %CPU MEM    USER
top              0.0  1564K+ root
Google Chrome He 0.0  38M+   donaldhutchison
com.apple.iCloud 0.0  2416K+ donaldhutchison
mdworker         0.0  8620K+ donaldhutchison
mdworker         0.0  10M+   donaldhutchison
mdworker         0.0  9308K+ donaldhutchison
mdworker         0.0  3748K+ donaldhutchison
bash             0.0  8140K+ donaldhutchison
login            0.0  1296K+ root
iTerm2           0.0  2660K+ donaldhutchison
Processes: 259 total, 2 running, 15 stuck, 242 sleeping, 1443 threads
2017/01/16 13:37:46
Load Avg: 1.02, 0.90, 0.97
CPU usage: 5.23% user, 4.11% sys, 90.64% idle
SharedLibs: 188M resident, 23M data, 24M linkedit.
MemRegions: 46310 total, 3644M resident, 131M private, 913M shared.
PhysMem: 6419M used (1213M wired), 1765M unused.
VM: 717G vsize, 535M framework vsize, 0(0) swapins, 0(0) swapouts.
Networks: packets: 170463/101M in, 147196/34M out.
Disks: 297331/5523M read, 54411/1481M written.</p>

<p>COMMAND          %CPU MEM    USER
top              7.3  1616K+ root
kernel_task      4.7  900M+  root
Google Chrome He 3.4  169M+  donaldhutchison
iTerm2           3.1  69M+   donaldhutchison
Google Chrome    1.8  160M   donaldhutchison
WindowServer     1.4  95M+   _windowserver
Google Chrome He 1.3  154M+  donaldhutchison
CoolProgramTh    0.5  55M    donaldhutchison
nwjs Helper      0.4  46M-   donaldhutchison
smcFanControl    0.3  9608K  donaldhutchison
```</p>

<p>Cool, we have what we want, but there’s also a lot of other crap in there. Now we need to trim out what we would like to display. Since the amount of lines output from this command should be constant, we can use a constant value to reference what we want to take out - in this case we’ll use the line 34 to mark where the output starts. Using <code>sed</code> we can do this quite easily</p>

<p><code>sed -n '34,/\Z/p'</code></p>

<p>This means</p>

<ul>
  <li><code>-n</code> Only output lines that match</li>
  <li><code>34,/\Z/p</code>
    <ul>
      <li><code>34</code> Our pattern space starts at line 34 (The start of the second “COMMAND” in the output)</li>
      <li><code>,</code> “here comes the next part”</li>
      <li><code>/\Z/p</code> we want to run <code>sed</code>’s ‘p’ function (print) and we pass it the regex <code>/\Z/</code> which means “to the end of the file”</li>
    </ul>
  </li>
</ul>

<p>Putting this together with a pipe, we get</p>

<p><code>top -c e -o cpu -l 2 -n 10 -stats command,cpu,mem,user | sed -n '34,/\Z/p'</code></p>

<p>And our output looks like</p>

<p><code>
COMMAND          %CPU MEM    USER
Google Chrome    12.1 162M+  donaldhutchison
top              7.0  1592K+ root
kernel_task      4.3  920M   root
Google Chrome He 3.5  185M+  donaldhutchison
iTerm2           1.9  72M    donaldhutchison
launchservicesd  1.8  6296K+ root
Quicksilver      1.6  28M+   donaldhutchison
Google Chrome He 1.2  144M+  donaldhutchison
WindowServer     1.1  106M-  _windowserver
GeekTool Helper  0.8  56M-   donaldhutchison
</code></p>

<p>Cool, now we can throw this into GeekTool and get some process information. Here i’ve set it to update every 5 seconds, but we could screw around with these values</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/install_referrer/" class="btn" title="Install referrer testing">Previous</a>
      
      
        <a href="/pentesting-for-developers-oscp-review/" class="btn" title="Pentesting for Developers - OSCP Review">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 Donald Hutchison. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/rev_kachowski" title="Donald Hutchison on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="https://linkedin.com/in/donald-hutchison-16aa7022" title="Donald Hutchison on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="https://careers.stackoverflow.com/donaldhutchison" title="Donald Hutchison on StackExchange" target="_blank"><i class="fa fa-stack-exchange fa-2x"></i></a>
	
	
	<a href="https://github.com/rkachowski" title="Donald Hutchison on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	<a href="http://rkachowski.tumblr.com" title="Donald Hutchison on Tumblr" target="_blank"><i class="fa fa-tumblr-square fa-2x"></i></a>
  
	
  <a href="/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = '';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-17488316-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script src="/assets/js/subtitle.js"></script>


</body>
</html>
